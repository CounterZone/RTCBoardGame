"use strict";(self.webpackChunkrtc_boardgame=self.webpackChunkrtc_boardgame||[]).push([[228],{2755:function(e,t,r){r.r(t),r.d(t,{default:function(){return S}});for(var a=r(7294),n=r(237),s=r(1721),o=r(6187),i=r(8199),l={stroke:"#000000",strokeWidth:"0.3"},c=new Array(19),h=[],m=0;m<19;m++)c[m]=" ";for(m=0;m<19;m++)h.push(c.slice());var u={piecesState:h,nextPlayer:"o",playerSymbol:"o",movesLeft:1,playerSymbolSelected:!1,winner:null},p=function(e){function t(t){var r;return(r=e.call(this,t)||this).state={gameState:u,remotePlayerConnected:!1,receivedResetRequest:!1,sentResetRequest:!1},r}(0,s.Z)(t,e),t.getDerivedStateFromProps=function(e,t){return{remotePlayerConnected:e.remotePlayerConnected}};var r=t.prototype;return r.onMove=function(e){"reset"===e.type&&(this.setState({receivedResetRequest:!0}),this.state.sentResetRequest&&this.reset())},r.restart=function(e){e.state.remotePlayerConnected?e.state.receivedResetRequest?(e.props.sendMove({type:"reset"}),e.reset()):(this.props.sendChat("Restart?"),this.props.sendMove({type:"reset"}),this.setState({sentResetRequest:!0})):e.reset()},r.reset=function(){for(var e=new Array(19),t=[],r=0;r<19;r++)e[r]=" ";for(r=0;r<19;r++)t.push(e.slice());u={piecesState:t,nextPlayer:"o",movesLeft:1,playerSymbol:"o",playerSymbolSelected:!1,winner:null},this.setState({gameState:u,receivedResetRequest:!1,sentResetRequest:!1}),this.props.gameBoardRef.current.setState({gameState:u}),this.props.log("Restarted!")},r.render=function(){var e=this,t="";null!==this.state.gameState.winner?t="Winner: "+("o"===this.state.gameState.winner?"⬤":"○")+"!":!0===this.state.remotePlayerConnected?(t="Current Player: ",!1===this.state.gameState.playerSymbolSelected?t+="local (black)":this.state.gameState.nextPlayer==this.state.gameState.playerSymbol?t+="local ("+("o"===this.state.gameState.nextPlayer?"⬤":"○")+")":t+="remote ("+("o"===this.state.gameState.nextPlayer?"⬤":"○")+")"):t="Playing locally.";return a.createElement("div",{style:{position:"relative",marginTop:"2vh"}},a.createElement(o.Z,null,a.createElement("span",null,t),a.createElement(i.Z,{style:{float:"right"},size:"sm",variant:"outline-primary",onClick:function(){return e.restart(e)}},"Restart")))},t}(a.Component),y=function(e){function t(t){var r;return(r=e.call(this,t)||this).paintBox=a.createRef(),r.state={width:"100",height:"100",gameState:u,remotePlayerConnected:!1},r}(0,s.Z)(t,e),t.getDerivedStateFromProps=function(e,t){return{remotePlayerConnected:e.remotePlayerConnected}};var r=t.prototype;return r.onClick=function(e,t){!0===this.state.remotePlayerConnected?this.state.gameState.nextPlayer===this.state.gameState.playerSymbol&&this.makeMove(e,t):this.makeMove(e,t)},r.checkWin=function(e){for(var t=this.state.gameState.piecesState,r=0,a=[[0,1],[1,0],[1,1],[1,-1]];r<a.length;r++){for(var n=a[r],s=n[0],o=n[1],i=e[0],l=e[1],c=1;i>0&&l>0&&i<19&&l<19&&t[i][l]===t[i-s][l-o];)i-=s,l-=o,c+=1;for(i=e[0],l=e[1];i>0&&l>0&&i<18&&l<18&&t[i][l]===t[i+s][l+o];)i+=s,l+=o,c+=1;if(c>=6)return t[i][l]}return null},r.sendMove=function(e){this.props.sendMove({type:"move",newState:e})},r.onMove=function(e){if("move"===e.type){var t=e.newState,r=this.state.gameState;r.playerSymbolSelected?t.playerSymbol=r.playerSymbol:(t.playerSymbol="x",t.playerSymbolSelected=!0),this.setState({gameState:t}),this.props.gameInfoPanelRef.current.setState({gameState:t})}},r.makeMove=function(e,t){if(null===this.state.gameState.winner){var r=this.state.gameState;r.piecesState[e][t]=r.nextPlayer;var a=this.checkWin([e,t]);null!==a?r.winner=a:2==r.movesLeft?r.movesLeft-=1:(r.movesLeft=2,r.nextPlayer="o"===r.nextPlayer?"x":"o",this.state.remotePlayerConnected&&!r.playerSymbolSelected&&(r.playerSymbolSelected=!0)),this.setState({gameState:r}),this.props.gameInfoPanelRef.current.setState({gameState:r}),this.state.remotePlayerConnected&&this.sendMove(r)}},r.componentDidMount=function(){var e=Math.min(this.paintBox.current.offsetWidth,this.paintBox.current.offsetHeight);this.setState({width:e,height:e})},r.render=function(){for(var e=this,t={margin:"auto",display:"block",width:this.state.width,height:this.state.height},r=[],n=[],s=0;s<19;s++){var o=5+90*s/18;n.push(a.createElement("line",{x1:o,y1:"5",x2:o,y2:"95",key:s,style:l})),n.push(a.createElement("line",{y1:o,x1:"5",y2:o,x2:"95",key:s+19,style:l}))}for(var i=function(t){for(var n=function(n){r.push(a.createElement(f,{x:t,y:n,key:19*t+n,status:e.state.gameState.piecesState[t][n],onClick:function(){return e.onClick(t,n)}}))},s=0;s<19;s++)n(s)},c=0;c<19;c++)i(c);return a.createElement("div",{ref:this.paintBox,style:{width:"100%",height:"100%"}},a.createElement("svg",{viewBox:"0 0 100 100",style:t},n,r))},t}(a.Component),f=function(e){function t(t){var r;return(r=e.call(this,t)||this).state={status:r.props.status},r}(0,s.Z)(t,e),t.getDerivedStateFromProps=function(e,t){return{status:e.status}};var r=t.prototype;return r.onClick=function(e){e.props.onClick()},r.render=function(){var e=this,t=5/2.2,r="";return"o"===this.state.status?r=a.createElement("circle",{cx:5+5*this.props.x,cy:5+5*this.props.y,r:t,stroke:"none",fill:"black"}):"x"===this.state.status?r=a.createElement("circle",{cx:5+5*this.props.x,cy:5+5*this.props.y,r:t,stroke:"none",fill:"white"}):" "===this.props.status&&(r=a.createElement("rect",{x:5+5*this.props.x-2.5,y:5+5*this.props.y-2.5,width:5,height:5,fillOpacity:"0",onClick:function(){e.onClick(e)}})),a.createElement("g",null,r)},t}(a.Component),S=function(){return a.createElement("main",null,a.createElement("title",null,"Ultimate tic-tac-toe"),a.createElement(n.Z,{gameBoard:y,gameInfoPanel:p}))}}}]);
//# sourceMappingURL=component---src-pages-connect-6-js-2b82a3b35b7e13d87630.js.map